<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
<!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>CRM Admin</title>
<!-- plugins:css -->
<link rel="stylesheet" href="vendors/feather/feather.css">
<link rel="stylesheet" href="vendors/ti-icons/css/themify-icons.css">
<link rel="stylesheet" href="vendors/css/vendor.bundle.base.css">
<!-- endinject -->
<!-- Plugin css for this page -->
<link rel="stylesheet"
	href="vendors/datatables.net-bs4/dataTables.bootstrap4.css">
<link rel="stylesheet" href="vendors/ti-icons/css/themify-icons.css">
<link rel="stylesheet" type="text/css"
	href="js/select.dataTables.min.css">
<!-- End plugin css for this page -->
<!-- inject:css -->
<link rel="stylesheet" href="css/vertical-layout-light/style.css">
<!-- endinject -->
<link rel="shortcut icon" href="images/favicon.png" />
<script src="https://code.jquery.com/jquery-3.7.1.min.js"
	integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
	crossorigin="anonymous"></script>

</head>
<body>
	<div class="container-scroller">
		<!-- partial:partials/_navbar.html -->
		<nav class="navbar col-lg-12 col-12 p-0 fixed-top d-flex flex-row">
			<div
				class="text-center navbar-brand-wrapper d-flex align-items-center justify-content-center">
				<a class="navbar-brand brand-logo mr-5" href="index.html"> <!--img src="images/logo.svg" class="mr-2" alt="logo"-->
					CRM
				</a> <a class="navbar-brand brand-logo-mini" href="index.html"><img
					src="images/logo-mini.svg" alt="logo" /></a>
			</div>
			<div
				class="navbar-menu-wrapper d-flex align-items-center justify-content-end">
				<button class="navbar-toggler navbar-toggler align-self-center"
					type="button" data-toggle="minimize">
					<span class="icon-menu"></span>
				</button>
				<ul class="navbar-nav mr-lg-2">
					<li class="nav-item nav-search d-none d-lg-block">logo2 -
						<p th:text="${supplierId}"></p>
					</li>
				</ul>
				<ul class="navbar-nav navbar-nav-right">
					
					<li class="nav-item nav-profile dropdown"><a
						class="nav-link dropdown-toggle" href="#" data-toggle="dropdown"
						id="profileDropdown"> <img src="images/faces/profilepic.png"
							alt="profile" />
					</a>
						<div class="dropdown-menu dropdown-menu-right navbar-dropdown"
							aria-labelledby="profileDropdown">
							<a class="dropdown-item"> <i class="ti-settings text-primary"></i>
								Settings
							</a> <a class="dropdown-item" href="/CRM/logout"> <i
								class="ti-power-off text-primary"></i> Logout
							</a>
						</div></li>

				</ul>
				<button
					class="navbar-toggler navbar-toggler-right d-lg-none align-self-center"
					type="button" data-toggle="offcanvas">
					<span class="icon-menu"></span>
				</button>
			</div>
		</nav>
		<!-- partial -->
		<div class="container-fluid page-body-wrapper">
			<!-- partial:partials/_settings-panel.html -->

			
			<!-- partial -->
			<!-- partial:partials/_sidebar.html -->
			<nav class="sidebar sidebar-offcanvas" id="sidebar">
				<ul class="nav">
				<li class="nav-item"><a class="nav-link" href="/CRM/dashboard">
							<i class="icon-grid menu-icon"></i> <span class="menu-title">Dashboard</span>
					</a></li>
					<li class="nav-item"><a class="nav-link" href="/CRM/addProduct">
							<i class="icon-grid menu-icon"></i> <span class="menu-title">Product</span>
					</a></li>
					<li class="nav-item"><a class="nav-link" href="/CRM/addSupplier">
							<i class="icon-grid menu-icon"></i> <span class="menu-title">Supplier</span>
					</a></li>

				</ul>
			</nav>
			<!-- partial -->
			<div class="main-panel">
				<div class="content-wrapper">
					<div class="row">
						<div class="col-md-6 grid-margin stretch-card">
			              <div class="card">
			                <div class="card-body">
			                  <h4 class="card-title">Add Supplier</h4>
			                  
			                  <form class="forms-sample">
			                    <div class="form-group">
			                      <label for="exampleInputUsername1">Supplier Name</label>
			                      <input type="text" class="form-control" id="supplierName" placeholder="Supplier Name">
			                    </div>
			                    <div class="form-group">
			                      <label for="exampleInputUsername1">Supplier Code</label>
			                      <input type="text" class="form-control" id="supplierCode" placeholder="Supplier Code">
			                    </div>
			                    <div class="form-group">
			                      <label for="exampleInputUsername1">Location</label>
			                      <input type="text" class="form-control" id="location" placeholder="Location">
			                    </div>
			                    <div class="form-group">
			                      <label for="exampleInputUsername1">Username</label>
			                      <input type="text" class="form-control" id="Username" autocomplete="off"  placeholder="Supplier Username">
			                    </div>
			                    <div class="form-group">
			                      <label for="exampleInputUsername1">Password</label>
			                      <input type="password" class="form-control" autocomplete="off" id="Password" placeholder="Supplier Password">
			                    </div>
			                    
			                    <input type="button" id="addSupplierbtn" class="btn btn-primary mr-2" value= "Submit" />
			                    <button class="btn btn-light">Cancel</button>
			                  </form>
			                </div>
			              </div>
			            </div>
			            <div class="col-md-6 grid-margin stretch-card">
			              <div class="card">
			                <div class="card-body">
			                  <h4 class="card-title">Supplier List</h4>
			                  
			                  <table id="SupplierTable"
								class="table table-bordered table-striped">
								<thead>
									<tr>
										
										<th>Supplier Name</th>
										<th>Code</th>
										<th>Location</th>
										
									</tr>
								</thead>
								<tbody></tbody>
							</table>
							<script>
							$(document).ready(function(){
								var table = $('#SupplierTable').DataTable({
							        "processing": true,
							        "serverSide": false, // Change to true if using server-side processing
							        "ajax": {
							            "url": "/CRM/api/supplier/allsuppliers2",
							            "dataSrc": ""
							        },
							        "columns": [
							            { "data": "supplierName" },
							            { "data": "supplierCode" },
							            { "data": "location" }
							           
	
							        ],
							        "pageLength": 100, // Default number of rows per page
							        "searching": true, // Disable default searching behavior
							        "ordering": false, // Disable sorting by clicking on column headers
							        "info": true, // Show "Showing x to y of z entries" information
							        "autoWidth": true // Disable automatic column width calculation
							    });	
								
								$('#addSupplierbtn').on('click',function(){
									
									var supplierName=$('#supplierName').val();
									var supplierCode=$('#supplierCode').val();
									var location=$('#location').val();
									var Username=$('#Username').val();
									var Password=$('#Password').val();
									var role="supplier";
									if (!supplierName.trim() || !Username.trim() || !Password.trim()) {
									    alert("Supplier Name, Username, and Password are mandatory fields.");
									}else{
									var supplierdata = {
										    "supplierName": supplierName,
										    "supplierCode": supplierCode,
										    "location": location,
										    "username": Username,
										    "password": Password,
										    "role": role
										};
									console.log(supplierdata);
									
									 // Making the AJAX request
								    var settings = {
								        "url": "/CRM/api/supplier/create",
								        "method": "POST",
								        "headers": {
								            "Content-Type": "application/json"
								        },
								        "data": JSON.stringify(supplierdata),
								        "error": function(xhr, status, error) {
								        	console.error("Error:", error);
								        	alert("Username already exist");
								    }
								    };

								    $.ajax(settings).done(function(response) {
								        console.log(response);
								        location.reload();
								    });
									}
								});
							});
							
							</script>
							 </div>
			              </div>
			            </div>
					</div>
				</div>
				<!-- content-wrapper ends -->
				<!-- partial:partials/_footer.html -->
				<footer class="footer">
					<div
						class="d-sm-flex justify-content-center justify-content-sm-between">
						<span
							class="text-muted text-center text-sm-left d-block d-sm-inline-block">Copyright
							2024. All rights reserved.</span>

					</div>
					<div
						class="d-sm-flex justify-content-center justify-content-sm-between">
						<span
							class="text-muted text-center text-sm-left d-block d-sm-inline-block">Developed
							by <a href="https://www.linkedin.com/in/fuhad-ali/"
							target="_blank">Fuhad </a>
						</span>
					</div>
				</footer>
				<!-- partial -->
			</div>
			<!-- main-panel ends -->
		</div>
		<!-- page-body-wrapper ends -->
	</div>
	<!-- container-scroller -->

	<!-- plugins:js -->
	<script src="vendors/js/vendor.bundle.base.js"></script>
	<!-- endinject -->
	<!-- Plugin js for this page -->
	<script src="vendors/chart.js/Chart.min.js"></script>
	<script src="vendors/datatables.net/jquery.dataTables.js"></script>
	<script src="vendors/datatables.net-bs4/dataTables.bootstrap4.js"></script>
	<script src="js/dataTables.select.min.js"></script>

	<!-- End plugin js for this page -->
	<!-- inject:js -->
	<script src="js/off-canvas.js"></script>
	<script src="js/hoverable-collapse.js"></script>
	<script src="js/template.js"></script>
	<script src="js/settings.js"></script>
	<script src="js/todolist.js"></script>
	<!-- endinject -->
	<!-- Custom js for this page-->
	<script src="js/dashboard.js"></script>
	<script src="js/Chart.roundedBarCharts.js"></script>
	<!-- End custom js for this page-->
</body>

</html>

